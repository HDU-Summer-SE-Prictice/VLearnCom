<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments :: head(~{::title},~{},~{})">
    <title>th:</title>
</head>

<body>
<nav th:replace="fragments :: navigator"></nav>

<div class="container layout layout-margin-top">
    <div class="row">
        <div class="col-md-9 layout-body">

            <div class="content question-detail">
                <div class="question-headline">
                    <span class="question-title" th:text="${quest.title}"></span>
                    <span class="question-figure" th:text="${quest.answers.size()}+' 回复'"></span>
                    <span class="question-figure" th:text="${quest.nview}+' 查看'"></span>
                </div>

                <div class="question-author" th:object="${quest.author}">
                    <div class="user-avatar ">
                        <a class="avatar" th:href="'/user/' + *{id}" target="_blank">
                            <img th:src="*{headicon}">
                        </a>
                    </div>

                    <div class="user-username ">
                        <a class="username" th:href="'/user/' + *{id}" th:text="*{username}" target="_blank">
                        </a>
                        <span class="user-level" th:text="*{level}"></span>
                    </div>

                    <span th:text="${quest.birth}"></span>
                </div>

                <div class="question-content markdown-body">
                    <pre th:text="${quest.content}"></pre>

                    <div class="labreport-detail-like">
                        <span class="btn btn-default btn-weiboshare">
                            <i class="fa fa-share-alt"></i>
                        </span>
                    </div>
                </div>

                <div class="question-answers" th:each="answer:${quest.answers}">
                    <p class="ptilte">全部回复</p>
                    <hr/>

                    <div class="answer-item">
                        <div class="answer-head">
                            <div class="user-avatar" th:object="${answer.author}">
                                <a class="avatar" th:href="'/user/' + *{id}" target="_blank">
                                    <img th:src="*{headicon}">
                                </a>
                            </div>
                        </div>

                        <div class="answer-detail">
                            <span class="comment-reply">
                                <div class="user-username" th:object="${answer.author}">
                                    <a class="username" th:href="'/user/' + *{id}" th:text="*{username}"
                                       target="_blank"></a>
                                    <span class="user-level" th:text="*{level}"></span>
                                </div>
                            </span>

                            <div class="answer-content markdown-body">
                                <pre th:text="${answer.content}"></pre>
                            </div>

                            <div>
                                <span class="create-time" th:text="${answer.birth}"></span>
                                <hr/>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="your-answer words-ctrl" th:unless="${#httpServletRequest.remoteUser}">
                    <p style="text-align: center;font-weight: 300; font-size: 18px;">
                        <a href="/login">登录</a>后回复帖子
                    </p>
                </div>
            </div>
        </div>

        <div class="col-md-3 layout-side">
            <a class="btn side-btn" href="#content" th:if="${#httpServletRequest.remoteUser}">我要回复</a>
        </div>
    </div>
</div>

<div class="container" th:if="${#httpServletRequest.remoteUser}">
    <p><span class="glyphicon glyphicon-pencil"></span>发表回复</p>
    <form class="form-horizontal" th:action="'/answerAdd/' + ${quest.id}" method="post">
        <div class="row">
            <div class="form-group">
                <div class="col-md-10">
                    <textarea id="content" name="content" rows="25" cols="120"></textarea>
                </div>
            </div>
            <div class="form-group">
                <div class="input-group-sm col-md-4 col-md-offset-0 col-xs-12">
                    <button type="submit" class="btn btn-primary btn-block">发表</button>
                </div>
            </div>
        </div>
    </form>
</div>

<script src="../app/dest/lib/lib.js?=2016121272249"></script>
<script src="../static/jquery/2.2.4/jquery.min.js"></script>
<script src="../static/ace/1.2.5/ace.js"></script>
<script src="../static/aliyun/aliyun-oss-sdk-4.3.0.min.js"></script>
<script src="../static/highlight.js/9.8.0/highlight.min.js"></script>
<script src="../static/jspdf/1.2.61/jspdf.min.js"></script>
<script src="../static/plupload/2.1.9/js/plupload.full.min.js"></script>
<script src="../static/zeroclipboard/2.2.0/ZeroClipboard.min.js"></script>
<script src="../static/videojs/video.min.js"></script>
<script src="../static/bootstrap-tour/0.11.0/js/bootstrap-tour.min.js"></script>
<script src="../static/bootstrap-table/1.11.0/bootstrap-table.min.js"></script>
<script src="../static/bootstrap-table/1.11.0/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="../static/bootstrap-table/1.11.0/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>
<script src="../static/ravenjs/3.7.0/raven.min.js"></script>
<script>
    Raven.config('https://bc3878b7ed0a4468a65390bd79e6e73f@sentry.xxxxxx.com/5', {
        release: '3.12.13'
    }).install();
</script>

<div th:replace="fragments :: footer"></div>
</body>
</html>
